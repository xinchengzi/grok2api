<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grok2API - 调用日志</title>
  <link rel="icon" href="/static/common/img/favicon/favicon.ico">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/geist@1.0.0/dist/fonts/geist-sans/style.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/geist@1.0.0/dist/fonts/geist-mono/style.css" rel="stylesheet">
  <link href="/static/common/css/common.css" rel="stylesheet">
  <link href="/static/common/css/toast.css" rel="stylesheet">
</head>

<body class="min-h-screen flex flex-col" style="background-color: var(--bg);">
  <div id="toast-container" class="toast-container"></div>
  <div id="app-header"></div>

  <main class="space-y-6 flex-1 container mx-auto max-w-5xl px-6 py-8 fade-in">
    <div class="space-y-6">
      <div class="flex justify-between items-center">
        <div>
          <h2 class="text-2xl font-semibold tracking-tight">调用日志</h2>
          <p class="text-[var(--accents-4)] mt-1 text-sm">查看 API 调用记录（分页、筛选、清空）。</p>
        </div>
        <div class="flex items-center gap-2">
          <button class="geist-button-outline" onclick="refreshLogs()">刷新</button>
          <button class="geist-button-outline" onclick="clearLogs()">清空</button>
        </div>
      </div>

      <div class="h-px bg-[var(--border)] my-6"></div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
        <div>
          <label class="text-xs text-[var(--accents-4)]">模型</label>
          <input id="filter-model" class="mt-1 w-full geist-input" placeholder="例如 grok-4-fast" />
        </div>
        <div>
          <label class="text-xs text-[var(--accents-4)]">成功</label>
          <select id="filter-success" class="mt-1 w-full geist-input">
            <option value="">全部</option>
            <option value="true">成功</option>
            <option value="false">失败</option>
          </select>
        </div>
        <div>
          <label class="text-xs text-[var(--accents-4)]">每页</label>
          <select id="filter-page-size" class="mt-1 w-full geist-input">
            <option value="50">50</option>
            <option value="100">100</option>
            <option value="200">200</option>
          </select>
        </div>
        <div class="flex items-end">
          <button class="geist-button-outline w-full" onclick="applyFilters()">应用筛选</button>
        </div>
      </div>

      <div class="flex items-center justify-between pt-2">
        <div class="text-sm text-[var(--accents-4)]">总计 <span id="total-count">0</span> 条</div>
        <div class="flex items-center gap-2">
          <button class="geist-button-outline" onclick="prevPage()">上一页</button>
          <span class="text-sm text-[var(--accents-4)]">第 <span id="page-number">1</span> 页</span>
          <button class="geist-button-outline" onclick="nextPage()">下一页</button>
        </div>
      </div>

      <div class="rounded-lg overflow-hidden bg-white overflow-x-auto">
        <table class="geist-table min-w-[1000px]">
          <thead>
            <tr>
              <th class="w-56 text-left">时间</th>
              <th class="w-48 text-left">模型</th>
              <th class="w-24 text-left">状态</th>
              <th class="w-28 text-left">耗时</th>
              <th class="w-40 text-left">Token</th>
              <th class="w-56 text-left">代理</th>
              <th class="text-left">错误</th>
            </tr>
          </thead>
          <tbody id="logs-tbody"></tbody>
        </table>
      </div>
    </div>
  </main>

  <script src="/static/common/js/toast.js"></script>
  <script src="/static/common/js/admin-auth.js"></script>
  <script src="/static/common/js/header.js"></script>
  <script src="/static/common/js/footer.js"></script>
  <script src="/static/admin/js/logs.js"></script>
</body>

</html>
